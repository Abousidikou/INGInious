{# This file is part of INGInious. See the LICENSE and the COPYRIGHTS files for #}
{# more information about the licensing of this file. #}

{% for section in sections %}
    {% if section.is_empty() %}
        {{ include.course_admin.task_dispensers.empty_section("section_" + section.get_id(), section.get_title(), section.get_config(), level, False, False, config_fields) | safe }}
    {% elif section.is_terminal() %}
        {{ include.course_admin.task_dispensers.task_list(course, tasks, section, level, display_subsections, config_fields) | safe }}
    {% else %}
        <div id="section_{{section.get_id()}}" class="section sections_list mb-4" data-level="{{level}}">
            <div class="section_header handle d-flex justify-content-between divided pr-3">
                <span class="title h{{level}} mr-3">
                    {{ section.get_title() }}
                </span>
                <span class="divider"></span>
                {{ include.course_admin.task_dispensers.section_menu(False, True, display_subsections) | safe }}
            </div>
            {% if config_fields %}
                <div class="config card-body">
                    {{ include.course_admin.task_dispensers.section_config(section.get_config(), config_fields) | safe }}
                </div>
            {% endif %}
            <div class="content ml-4">
                {% with sections=section.get_sections_list(),level=level+1 %}
                    {% include "course_admin/task_dispensers/section.html" %}
                {% endwith %}
            </div>
        </div>
    {% endif %}
{% endfor %}
