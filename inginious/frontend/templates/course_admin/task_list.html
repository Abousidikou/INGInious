$def with (course, tasks, errors, validated, webdav_host)

$#
$# This file is part of INGInious. See the LICENSE and the COPYRIGHTS files for
$# more information about the licensing of this file.
$#

$var title: $:course.get_name(user_manager.session_language())

$var Column: $:template_helper.call('course_admin_menu',course=course,current='tasks')
$ is_admin = user_manager.has_admin_rights_on_course(course)

$def NavbarF():
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="$get_homepath()/course/$course.get_id()">$course.get_name(user_manager.session_language())</a></li>
            <li class="breadcrumb-item"><a href="$get_homepath()/admin/$course.get_id()" title=$:_('"Administration"') data-toggle="tooltip" data-placement="bottom">
                <i class="fa fa-user-secret"></i></a></li>
            <li class="breadcrumb-item active"><a href="#"><i class="fa fa-tasks"></i> $:_("Tasks") <span class="sr-only">$:_("(current)")</span></a></li>
        </ol>
    </nav>
$var Navbar: $:NavbarF()

<h2>$:_("Tasks")</h2>

$if webdav_host:
    <div class="mb-3 mt-3" id="webdav_accord" role="tablist" aria-multiselectable="true">
        <div class="card border-info">
            <div class="card-header bg-info text-white" id="webdav_head">
                <div style="cursor: pointer" data-toggle="collapse" data-parent="#webdav_accord" href="#webdav" aria-expanded="false" aria-controls="webdav">
                    <i class="fa fa-fw fa-chevron-right"></i>$:_("WebDAV access")
                </div>
            </div>
            <div id="webdav" class="collapse" role="tabpanel" aria-labelledby="webdav_head">
                <div class="card-body">
                    $:_("Use this URL to access your course folder using WebDAV:")<br/>
                <br/>
                <table class="table">
                    <tr><td>$:_("URL")</td><td><code>$(webdav_host + "/" + course.get_id())</code></td></tr>
                    <tr><td>$:_("Username")</td><td><code>$user_manager.session_username()</code></td></tr>
                    <tr><td>$:_("Password")</td><td><code>$user_manager.session_api_key()</code></td></tr>
                </table>
                </div>
            </div>
        </div>
    </div>

$if errors:
    $for error in errors:
        <div class="alert alert-danger" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            $error
        </div>
$elif validated:
    <div class="alert alert-success" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        $:_("Change saved.")
    </div>

$:course.get_task_dispenser().render_edit(template_helper, course, tasks)